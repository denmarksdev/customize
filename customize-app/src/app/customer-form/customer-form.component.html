<app-page-title title="{{ title }}" />

<form [formGroup]="customerForm" (ngSubmit)="onSubmit()" class="container">
    <div class="container">


        <p>
            <span>
               <strong>ID: </strong>{{ customer?.id }}
            </span>
            <span>
                <strong>Cadastrado em: </strong> {{ customer?.createdAt | date:'dd/MM/yyyy HH:mm:ss' }}
            </span>
        </p>



        <mat-form-field appearance="fill">
            <mat-label>Name</mat-label>
            <input matInput formControlName="name" ng-model>
            @if (name?.invalid) {
            <mat-error *ngFor="let error of name?.errors| keyvalue">
                {{ this.mapError(error.key, error.value) }}
            </mat-error>
            }
        </mat-form-field>

        <mat-form-field appearance="fill">
            <mat-label>Cellphone</mat-label>
            <input matInput formControlName="cellphone" placeholder="exemplo 551199994444" ng-model>
            @if (cellphone?.invalid) {
            <mat-error *ngFor="let error of cellphone?.errors| keyvalue">
                {{ this.mapError(error.key, error.value) }}
            </mat-error>
            }
        </mat-form-field>

        <mat-form-field appearance="fill">
            <mat-label>Email</mat-label>
            <input matInput formControlName="email" ng-model>
            @if (email?.invalid ) {
            <mat-error *ngFor="let error of email?.errors| keyvalue">
                {{ this.mapError(error.key, error.value) }}
            </mat-error>
            }
        </mat-form-field>
    </div>

    <button mat-flat-button color="primary" type="submit" [disabled]="!customerForm.valid">{{action}}</button>

    @if (isLoading) {
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    }

    @if (serverError) {
    <mat-error *ngFor="let error of serverError.errors| keyvalue">
        {{ this.mapError(error.key, error.value) }}
    </mat-error>

    }

</form>